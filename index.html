<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="style.css">
  <title>Formulario Registro</title>
</head>
<body>
  <div class="container">
    <h1>REGISTRO DE FALLAS</h1>
    <form id="registroForm">
      <!-- Fecha automatica -->
      <div class="form-group">
        <label for="fecha">Fecha de registro</label>
        <input type="date" id="fecha" name="fecha" required>
      </div>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const fechaInput = document.getElementById("fecha");
          const hoy = new Date();
          
          const anio = hoy.getFullYear();
          const mes = String(hoy.getMonth() + 1).padStart(2, '0'); // 01-12
          const dia = String(hoy.getDate()).padStart(2, '0');     // 01-31
          
          const fechaHoy = `${anio}-${mes}-${dia}`;
          fechaInput.value = fechaHoy;
        });
      </script>
<!-- CARACTERISTICA DE LA INSTALACION -->
  <div class="form-group">
    <label for="caracteristica">Característica</label>
    <select id="caracteristica" name="caracteristica" required onchange="filtrarEquipos()">
      <option value="" disabled selected hidden>Seleccione una característica</option>
      <option value="Cabina exterior de proteccion">Cabina exterior de proteccion</option>
      <option value="Cable">Cable</option>
      <option value="Conexion de celda">Conexion de celda</option>
      <option value="Convencional Sub">Convencional Sub</option>
      <option value="Convencional Super">Convencional Super</option>
      <option value="Interruptor de Potencia">Interruptor de Potencia</option>
      <option value="Recloser">Recloser</option>
      <option value="Seccionador de potencia interior">Seccionador de potencia interior</option>
    </select>
  </div>

  <!-- CODIGO DEL EQUIPO -->
  <div class="form-group">
    <label for="codigodelequipo">Código del equipo</label>
    <select id="codigodelequipo" name="codigodelequipo" required>
      <option value="" disabled selected hidden>Seleccione el código del equipo</option>
    </select>
  </div>
<script>
  // Relación entre características y códigos de equipo
  const equiposPorCaracteristica = {
    "Cabina exterior de proteccion": ["Bateria MT","Bornera Secc Rele","Estructura Cabina (CEPS)","Interrup Pot Trip MT","Rectf/Cargd Bater MT","Rele en MT","Sistem Psta Tierr MT", "Transf Corrie Pro MT","Transf Tensio Pro MT"],
    "Cable": ["Termin Int Cables MT", "Sistem Psta Tierr MT"],
    "Conexion de celda": ["Aislador MT", "Celda metalica MT","Celda modular MT","Fusible MT","Interrup Pot Trip MT","Pararrayo MT","Secc Pot Trp Int MT","Secc Unipolar INT MT","Sistem Barras MT SED","Sistem Psta Tierr MT"],
    "Convencional Sub": ["Celda metalica MT", "Disyuntor", "Est Sub Conv Subte","Fusible MT","Secc Unipolar INT MT","Sistem Barras BT SED","Sistem Barras MT SED","Sistem Psta Tierr MT","Tablero de SED MT","Transformador Distri"],
    "Convencional Super": ["Celda metalica MT", "Disyuntor","Est Sub Conv Nivel","Fusible MT","Secc Unipolar Int MT","Sistem Barras BT SED","Sistem Barras MT SED", "Transformador Distri"],
    "Interruptor de Potencia": ["Bateria MT", "Bornera Secc Rele","Celda metalica MT","Celda modular MT","Equipo Telemand en MT","Gab pro ctrl red MT","Interrup Pot Trip MT","Pararrayo MT","Rectf/Cargd Bater MT","Rele en MT","Secc Unipolar Int MT","Sistem Barras MT SED","Sistem Psta Tierr MT","Transf Corrie Pro MT","Transf Tensio Pro MT"],
    "Recloser": ["Bateria MT","Equipo Telemando en MT","Gab pro ctrl red MT","Recloser MT","Rele en MT"],
    "Seccionador de potencia interior": ["Celda metalica MT", "Celda modular MT","Equipo Telemando en MT","Gab pro ctrl red MT","Pararrayo MT","Secc Pot Trip Int MT","Secc Unipolar Int MT","Sistem Barras MT SED","Sistem Psta Tierr MT"]
  };

  // Lista completa con etiquetas legibles
  const opcionesEquipos = {
    "Aislador MT": "Aislador MT",
    "Bateria MT": "Bateria MT",
    "Bornera Secc Rele": "Bornera Secc Rele",
    "Celda metalica MT": "Celda metalica MT",
    "Celda modular MT": "Celda modular MT",
    "Disyuntor": "Disyuntor",
    "Equipo Telemando en MT": "Equipo Telemando en MT",
    "Est Sub Conv Nivel": "Est Sub Conv Nivel",
    "Est Sub Conv Subte": "Est Sub Conv Subte",
    "Estructura Cabina (CEPS)": "Estructura Cabina (CEPS)",
    "Fusible MT": "Fusible MT",
    "Gab pro ctrl red MT": "Gab pro ctrl red MT",
    "Interrup Pot Trip MT": "Interrup Pot Trip MT",
    "Pararrayo MT": "Pararrayo MT",
    "Recloser MT": "Recloser MT",
    "Rectf/Cargd Bater MT": "Rectf/Cargd Bater MT",
    "Rele en MT": "Rele en MT",
    "Secc Pot Trip Int MT": "Secc Pot Trip Int MT",
    "Secc Unipolar Int MT": "Secc Unipolar Int MT",
    "Sistem Barras BT SED": "Sistem Barras BT SED",
    "Sistem Barras MT SED": "Sistem Barras MT SED",
    "Sistem Psta Tierr MT": "Sistem Psta Tierr MT",
    "Tablero de SED MT": "Tablero de SED MT",
    "Termin Int Cables MT": "Termin Int Cables MT",
    "Transf Corrie Pro MT": "Transf Corrie Pro MT",
    "Transf Tensio Pro MT": "Transf Tensio Pro MT",
    "Transformador Distri": "Transformador Distri"
  };

  function filtrarEquipos() {
    const caracteristica = document.getElementById("caracteristica").value;
    const equipoSelect = document.getElementById("codigodelequipo");

    // Limpiar select
    equipoSelect.innerHTML = '<option value="" disabled selected hidden>Seleccione el código del equipo</option>';

    // Obtener códigos asociados
    const codigos = equiposPorCaracteristica[caracteristica] || [];

    // Agregar opciones al select
    codigos.forEach(codigo => {
      const option = document.createElement("option");
      option.value = codigo;
      option.textContent = opcionesEquipos[codigo] || codigo;
      equipoSelect.appendChild(option);
    });
  }
</script>
  <div class="form-group">
    <label for="descripcion">Descripción de la falla</label>
    <input type="text" id="descripcion" name="descripcion" class="control">
  </div>
      <!-- Botón -->
      <button type="button" id="enviarBtn">Enviar</button>
    </form>
    <div id="mensaje" style="margin-top:15px; display:none;"></div>
  <script src="script.js?v=1.9"></script>
</body>
</html>
